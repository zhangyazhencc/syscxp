
#初始化或重置证书，所需参数vpnuuid
/vpn/init_cert
{
	"vpnuuid": "aaa123456"
}

#生成openvpn服务配置文件，server端server.conf, client端client.conf
#所需参数vpnuuid，hostip 服务器外网IP，vpnport服务的端口号, level 2层或3层vpn
/vpn/conf_vpn
{
	"vpnuuid": "aaa123456",
	"hostip" : "192.168.211.91",
	"vpnport":	"31195",
	"level": "2"
}

#启动停止openvpn service，
/vpn/vpn_service
{
	"vpnuuid": "aaa123456",
	"vpnvlanid": "1520",
	"vpnport" : "31195",
	"command": "[start|stop]"
}

#配置所需的虚拟接口，包括linux Bridge，带vlan的子接口eth2.1520
#ddnport对应专线的物理网卡
/vpn/vport
{
	"vpnvlanid": "1520",
	"ddnport": "eth2",
	"vpnport": "31195",
	"command": "[add|del]"
}

#限速设置在openvpn 生成的虚拟网卡tapx上
#限速上下行一致,单位 Kb/s
/vpn/rate_limiting
{
	"vpnport": "31195",
	"speed" : "6000",
	"command": "[set|clean]"
}

#用于物理服务器重启后启动openvpn，物理服务器重启后openvpn及所相关的虚拟接口都需要重新配置
/vpn/start_all
{
    "vpnuuid" : "aaa123456",
    "vpnvlanid" : "1520",
    "vpnport" : "31195",
    "ddnport" : "eth2",
    "speed": "6000"

}

#销毁openvpn所有内容
/vpn/destroy_vpn
{
	"vpnuuid" : "aaa123456",
	"vpnvlanid": "1520",
	"ddnport": "eth2",
	"vpnport": "31195"
}

#更新L3 VPN路由方式,会重新生成server.conf, client会自动更新路由表,
#default Yes 对应云网络VPN网关中→客户端模式→网关模式, routes 可以不设置
#default No 对应云网络VPN网关中→客户端模式→路由模式， routes 为需要设置的路由信息
/vpn/update_l3_route
{
	"vpnuuid": "411484302f7d4035959bcdc4f76a7e35",
	"route": {"default":"Yes", "routes":[["192.168.10.0","255.255.255.0"], ["172.16.1.0", "255.255.255.0"]]}
}
