HOST: http://192.168.211.99/

# Tunnel [/tunnel/api]

### 自动创建Tunnel [APICreateTunnelMsg]

+ 权限
        
        tunnel:tunnel:create

+ 参数（默认必填）：
    + 客户：**NASS**不传，**BOSS**必传
    + 名称
    + 描述：非必填
    + 连接点：
        + 1.若选云
            + 从**CloudVO**中列出所有云类型,页面显示**name**,选择一个传参**uuid**(通用查询：**APIQueryCloudMsg**)
            + 再选择，**cloudType**为选择的云类型**uuid**,**state**为**Enabled**,(若**NASS** **status**为**Open**) 的连接点（通用查询：**APIQueryEndpointMsg**）
        + 2.若选**IDC**
            + 通过**province**选择节点（查询：**APIListProvinceNodeMsg** | **APIQueryNodeMsg**）
            + 再选择该节点下，**endpointType**为**ACCESSIN**，**state**为**Enabled**,(若**NASS** **status**为**Open**) 的连接点（通用查询：**APIQueryEndpointMsg**）
    + 若 接口选择：新购
        + 类型：即端口规格，列出所选连接点获取可用端口规格，显示**name**,传参**uuid**（查询：**APIGetInterfaceTypeMsg**）
    + 若 接口选择：已有接口
        + 选择物理接口：选择该连接点下，**state = Paid**,**type = TRUNK** 的物理接口（通用查询：**APIQueryInterfaceMsg**）
    + 带宽：查询带宽规格表，列出显示**name**,传参**uuid**（通用查询：**APIQueryBandwidthOfferingMsg**）
    + 网络质量：通过两端连接点查询是否存在互联连接点（查询：**APIListInnerEndpointMsg**），如果存在，页面显示**name**，选择一个，传参**endpointUuid**
    + 共点接口：如果上面的物理接口为已有接口，则列在共点接口下，并选择一个共点接口
    + 共点专线：根据所选的共点接口，查询共点专线（查询：**APIListCrossTunnelMsg**）
    + 付费类型
    + 付费时长


+ 请求 (application/json;charset=UTF-8)

    + Body
    
            {
                "com.syscxp.header.tunnel.tunnel.APICreateTunnelMsg":{
                    "name":"陈升昆山日本测试",
                    "description":"测试",
                    "bandwidthOfferingUuid":"100M",
                    "endpointAUuid":"bc7bf215e6b2465bae386d0a2d976062",
                    "endpointZUuid":"38c68ae9705c45cda325cd07d7806b70",
                    "interfaceAUuid":"",
                    "interfaceZUuid":"",
                    "portOfferingUuidA":"",
                    "portOfferingUuidZ":"",
                    "crossInterfaceUuid":"",
                    "crossTunnelUuid":"",
                    "innerConnectedEndpointUuid":"",
                    "duration":2,
                    "productChargeModel":"BY_MONTH",
                    "session":{
                        "uuid":"b64a71a1b1a144a2899d67cffccf448d"
                    }
                }
            }

+ 后台验证（validate）：
    + 1.判断同一个用户的名称是否已经存在
    + 2.判断通道两端的连接点是否相同，不允许相同
    + 3.如果跨国,验证互联连接点和内外联交换机配置
    + 4.判断账户金额是否充足

+ 业务流程：






