HOST: http://192.168.211.99/

# Interface [/tunnel/api]

### 自动创建物理接口 [APICreateMonitorHostMsg]

+ 权限(action)
    
        tunnel:host:create    adminOnly = true

+ 参数
    + name (string) - 名称
    + code (string) - 编号
    + nodeUuid (string) - 节点UUID
    + hostIp (string) - 主机内网IP
    + sshPort (int) - ssh端口
    + username (string) - 用户名
    + password (string) - 密码
    + position (string) - 位置
    + monitorType (enum) - {"TUNNEL", "NETTOOL"}之一
        
+ 请求 (application/json;charset=UTF-8)

    + Body
    
            {
            	"com.syscxp.header.tunnel.host.APICreateMonitorHostMsg":{
            	    "name":"host28",
            	    "code":"1002993-23-2",
            	    "nodeUuid":"684049bf8943554dc14384ay1df1f62e",
            	    "hostIp":"192.168.211.28",
            	    "sshPort":22,
            	    "username":"root",
            	    "password":"syscloud.cn",
            	    "position": "30000",
            	    "monitorType":"TUNNEL",
            	    "session":{
            	    	"uuid": "684049bf8943554dc14384ay1df1f62e"
            	    }
            	}
            }

+ 验证

    + IP是否合法
    + IP是否重复
    + 名称是否重复
    + 编号是否重复
    
+ 业务流程
    + 请求处理：
        1. 保存数据库，State：Enabled，Status：Connecting，
        2. ssh检查host能否访问tunnel
        3. ansible部署agent
        4. echo访问agent
        5. 设置iptables规则
        6. 成功修改Status：Connected
        7. 失败清理数据库
    