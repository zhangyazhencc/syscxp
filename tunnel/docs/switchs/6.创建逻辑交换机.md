HOST: http://192.168.211.99/

# Switchs [/tunnel/api]

### 创建逻辑交换机 [APICreateSwitchMsg]

+ 权限
        
        仅admin账户

+ 参数（默认必填）：
    + 名称
    + 描述：非必填
    + 编号：唯一
    + 若  类型：接入（**ACCESS**）
        + 连接点：选择**endpointType**为**CLOUD**或**ACCESSIN**，**state**为**Enabled** 的连接点（查询：**APIListProvinceNodeMsg** | **APIQueryNodeMsg** | **APIQueryEndpointMsg**）
        + 物理交换机：选择该节点下，且**accessType**不为**TRANSPORT** 的物理交换机（通用查询：**APIQueryPhysicalSwitchMsg**）
    + 若  类型：内联（**INNER**），外联（**OUTER**）
        + 连接点：选择**endpointType**为**INTERCONNECTED**，**state**为**Enabled** 的连接点（查询：**APIListProvinceNodeMsg** | **APIQueryNodeMsg** | **APIQueryEndpointMsg**）
        + 物理交换机：选择该节点下，且**accessType**不为**TRANSPORT** 且 **type**为**MPLS** 的物理交换机（通用查询：**APIQueryPhysicalSwitchMsg**）

+ 请求 (application/json;charset=UTF-8)

    + Body
    
            {
                "com.syscxp.header.tunnel.switchs.APICreateSwitchMsg":{
                    "name":"内联_上海",
                    "description":"测试",
                    "code":"inner_sh",
                    "type":"INNER",
                    "endpointUuid":"4a76f92831a2465697ec0d9c22db3c33",
                    "physicalSwitchUuid":"780509ac07ca461ea1bcc6c76dc09075",
                    "session":{
                        "uuid":"8991ca2627eb46c7bd8ac30551a756f7"
                    }
                }
            }

+ 后台验证（validate）：
    + 1.code唯一性验证
    + 2.若交换机类型为 内联（**INNER**），外联（**OUTER**）
        + 验证所属互联连接点下最多只能有2个逻辑交换机（分别一个INNER，一个OUTER），且所属物理交换机不能是同一个

+ 业务流程：
    + 保存数据




