HOST: http://192.168.211.99/

# Switchs [/tunnel/api]

### 创建物理交换机 [APICreatePhysicalSwitchMsg]

+ 权限
        
        仅admin账户

+ 参数（默认必填）：
    + 名称
    + 描述：非必填
    + 编号：唯一
    + 节点：通过**province**选择节点（查询：**APIListProvinceNodeMsg** | **APIQueryNodeMsg**）
    + 型号：从**SwitchModelVO**中选择（通用查询：**APIQuerySwitchModelMsg**）
    + 若 交换机类型：**SDN**
        + 接入类型：**ACCESS**
        + 上联端口：
        + 上联MPLS交换机：从**PhysicalSwitchVO**中选择类型为**MPLS**，且接入类型不为**ACCESS**（通用查询：**APIQueryPhysicalSwitchMsg**）
        + Mpls交换机端口：
    + 若 交换机类型：**MPLS**
        + 接入类型：**ACCESS，TRANSPORT，BOTH**
    + 位置：
    + 管理IP：唯一
    + 本地IP：唯一
    + 属主：
    + 用户名：
    + 密码：

+ 请求 (application/json;charset=UTF-8)

    + Body（创建SDN交换机）

            {
                "com.syscxp.header.tunnel.switchs.APICreatePhysicalSwitchMsg":{
                    "nodeUuid":"45f40eaa7a864e8aada273a2db5861b8",
                    "switchModelUuid":"ea70ebbbbb454a18b2704c3829d078a7",
                    "code":"CSW16",
                    "name":"盛科交换机_日本_16",
                    "owner":"syscloud",
                    "type":"SDN",
                    "accessType":"ACCESS",
                    "rack":"2",
                    "mIP":"192.168.211.16",
                    "localIP":"192.168.211.16",
                    "username":"admin",
                    "password":"admin",
                    "description":"测试",
                    "portName":"eth-0-3",
                    "uplinkPhysicalSwitchUuid":"b102c56e91f246c590bf6fe07adb96df",
                    "uplinkPhysicalSwitchPortName":"XGigabitEthernet0/0/3",
                    "session":{
                        "uuid":"c0002bf9347a4503bba54ebc1bd6beab"
                    }
                }
            }
            
    + Body（创建MPLS交换机）

            {
                "com.syscxp.header.tunnel.switchs.APICreatePhysicalSwitchMsg":{
                    "nodeUuid":"45f40eaa7a864e8aada273a2db5861b8",
                    "switchModelUuid":"ea70ebbbbb454a18b2704c3829d078a7",
                    "code":"HSW55",
                    "name":"华为交换机_日本_55",
                    "owner":"syscloud",
                    "type":"MPLS",
                    "accessType":"BOTH",
                    "rack":"2",
                    "mIP":"192.168.211.55",
                    "localIP":"5.5.5.5",
                    "username":"admin",
                    "password":"admin@123",
                    "description":"测试",
                    "session":{
                        "uuid":"c0002bf9347a4503bba54ebc1bd6beab"
                    }
                }
            }

+ 后台验证（validate）：
    + 1.code唯一性验证
    + 2.mIP唯一性验证
    + 3.localIP唯一性验证
    + 4.如果创建**SDN**交换机，要验证MPLS交换机端口（**uplinkPhysicalSwitchPortName**）
        + 判断该端口名称在业务端口中是否已经存在
        + 判断该端口名称在传输端口中是否已经存在
        + 判断该端口名称在监控端口中是否已经存在

+ 业务流程：
    + 保存数据**PhysicalSwitchVO**
    + 如果创建SDN交换机，保存**PhysicalSwitchUpLinkRefVO**
    
    



    
    
    
    
    
    
    
    
    