HOST: http://192.168.211.99/

# Interface [/tunnel/api]

### 修改物理接口端口 [APIUpdateInterfacePortMsg]

+ 权限(action)
    
        tunnel:tunnel:update

+ 参数
    + uuid (string) - 物理接口UUID
    + switchPortUuid (string) - 目标交换机端口UUID
    + networkType (string) - 端口类型
    + issue (boolean, optional) - 是否下发，默认false，不下发
    + segments (list, optional) - QinQ的内部VLAN段
    
+ 请求 (application/json;charset=UTF-8)

    + Body
    
            {
                "com.syscxp.header.tunnel.tunnel.APIUpdateInterfacePortMsg":{
                    "uuid":"5089e916c55f444db04d2621af198a9d",
                    "networkType":"QINQ",
                    "switchPortUuid":"b90bdfaf573c4a4b99c7b284fa7359ac",
                    "issue":false,
                    "segments":[
                        {
                            "startVlan":100,
                            "endVlan":200
                        }],
                    "session":{
                      "uuid":"bfe76091bc9c413cbd254c0eeb91db0a"
                    }
                }
            }

+ 验证

    + 物理接口是否属于登录账户，admin例外
    + 物理接口未过期
    + 同时被两条以上tunnel使用不能修改
    + 共享端口不能修改
    + 修改端口类型为QINQ时，segments不能为null,或者空列表 
    
+ 业务流程
    
    + 修改交换机端口，networkType的值不修改
    + 修改端口类型，传入的交换机端口UUID必须为原来的UUID
    + 修改端口类型为QINQ时， 必选传入内部VLAN段
    + 请求处理
        1. 修改物理接口信息，更新QINQ内部VLAN
        2. 如果被tunnel使用，修改TunnelSwitchPort信息
        3. 如果被tunnel使用以及issue为true，调用下发
        4. 失败回滚
        
        