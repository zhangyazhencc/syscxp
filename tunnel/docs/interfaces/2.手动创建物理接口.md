HOST: http://192.168.211.99/

# Interface [/tunnel/api]

### 自动创建物理接口 [APICreateInterfaceManualMsg]

+ 权限(action)
    
        tunnel:tunnel:create    adminOnly = true

+ 参数
    + name (string) - 物理接口UUID
    + description (string) - 描述
    + endpointUuid (string) - 连接点UUID
    + switchPortUuid (string) - 交换机端口UUID
    + networkType (string) - 端口类型，{"TRUNK", "ACCESS", "QINQ"}之一
    + duration (int) - 时长
    + productChargeModel (enum) - {"BY_MONTH", "BY_YEAR", "BY_WEEK", "BY_DAY"}之一
    + accountUuid (string) - 用户UUID
        
+ 请求 (application/json;charset=UTF-8)

    + Body
    
            {
                "com.syscxp.header.tunnel.tunnel.APICreateInterfaceManualMsg":{
                    "accountUuid":"01d5fde22afe49b285dd54a06b369525",
                    "name":"MPLS接入昆山2",
                    "description":"测试",
                    "endpointUuid":"ccaabf7d071d41a1ae15936d451522e2",
                    "switchPortUuid":"fe7a91bbb89c448fb021fe312d83a0bb",
                    "networkType":"QINQ",
                    "duration":2,
                    "productChargeModel":"BY_MONTH",
                    "session":{
                        "uuid":"ba96d6a1c45847e084f67336bb4235d5"
                    }
                }
            }

+ 验证

    + 判断同一个用户的接口名称是否已经存在
    + 判断同一个用户在同一个连接点下是否已经购买共享端口
    + 判断账户金额是否充足
    
+ 业务流程
    
    + 连接点选取：
    
        + 云连接点，通过 **APIQueryCloudMsg**，**APIQueryEndpointMsg** 获取
        + IDC连接点，通过 **APIListProvinceNodeMsg** |**APIQueryNodeMsg**，**APIQueryEndpointMsg** 获取
    
    + 请求处理：
        
        1. 保存数据库，accountUuid为null，状态Unpaid，过期时间当前时间
        2. 支付成功，accountUuid为ownerAccountUuid，状态Paid，过期时间为当前时间+时长
        3. 支付失败，不更改数据库
    